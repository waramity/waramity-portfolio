

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<h1 class="display-3">Skill-Set</h1>

<ul class="nav nav-underline">
  {% for item in skillset_data %}
  <li class="nav-item" role="presentation">
    <button
      class="nav-link {% if loop.index == 1 %}active{% endif %}"
      id="{{ loop.index }}-skillset-tab"
      data-bs-toggle="tab"
      data-bs-target="#{{ loop.index }}-skillset-tab-pane"
      type="button"
      role="tab"
      aria-controls="{{ loop.index }}-skillset-tab-pane"
    >
      {{ item.title }}
    </button>
  </li>
  {% endfor %}
</ul>

<div>
  <canvas id="skill-chart"></canvas>
</div>


<script>
const buttons = document.querySelectorAll('.nav-link');

  const ctx = document.getElementById("skill-chart");
  let currentTabIndex = 1;

  buttons.forEach((button, index) => {
    button.addEventListener("click", () => {
      buttons[currentTabIndex - 1].classList.remove("active");

      button.classList.add("active");

      currentTabIndex = index + 1;

      fetch(`/en/get_chart_data/${currentTabIndex}`)
        .then(response => response.json())
        .then(data => {
          skillChart.data.datasets[0].data = data.data;
          skillChart.update();
        })
        .catch(error => {
          console.error('Error fetching data:', error);
        });
    });
  });


const skillChart =  new Chart(ctx, {
    type: "bar",
    data: {
      labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"],
      datasets: [
        {
          label: "# of Votes",
          data: [12, 19, 3, 5, 2, 3],
          borderWidth: 1,
        },
      ],
    },
    options: {
      scales: {
        y: {
          beginAtZero: true,
        },
      },
    },
  });
</script>
